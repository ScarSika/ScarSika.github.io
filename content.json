{"pages":[],"posts":[{"title":"Visual Studio Code-Remote-SSH 密钥对连接方法","text":"由于经常需要同时在远程服务器上写代码加同步文件,又了解到VScode的Remote-SSH功能同时满足这两项需求，所以写下这篇文章记录使用方法。 生成公钥与私钥使用SSH的密钥连接需要创建一对钥匙： 123ssh-keygen -t rsa -b 4096 // 创建一对公钥和私钥（rsa加密，4096长度）// 秘钥储存位置，默认是'~/.ssh' 注意：如果电脑中没有ssh-keygen命令，则需要安装 OpenSSH 才能运行上述命令 生成一对密钥后，在目标文件夹（’~/.ssh’）下生成了两个文件： 12id_rsa // 私钥（放在本地）id_rsa.pub // 公钥（配置到服务器） 将公钥上传给服务器端对于上传方和接受方操作系统的不同，可分为以下几种命令串： 1.本地系统（Windows）=&gt;服务器系统（macOS or Linux）123$USER_AT_HOST=&quot;服务器账户名@服务器IP&quot; // 使用你自己的服务器IP与登录账户$PUBKEYPATH=&quot;$HOME/.ssh/id_rsa.pub&quot; // PUBKEYPATH是你公钥的路径$pubKey=(Get-Content &quot;$PUBKEYPATH&quot; | Out-String); ssh &quot;$USER_AT_HOST&quot; &quot;mkdir -p ~/.ssh &amp;&amp; chmod 700 ~/.ssh &amp;&amp; echo '${pubKey}' &gt;&gt; ~/.ssh/authorized_keys &amp;&amp; chmod 600 ~/.ssh/authorized_keys&quot; 2.本地系统（Windows ）=&gt;服务器系统（Windows ）123$USER_AT_HOST=&quot;服务器账户名@服务器IP&quot; // 使用你自己的服务器IP与登录账户$PUBKEYPATH=&quot;$HOME/.ssh/id_rsa.pub&quot; // PUBKEYPATH是你公钥的路径Get-Content &quot;$PUBKEYPATH&quot; | Out-String | ssh $USER_AT_HOST &quot;powershell `&quot;New-Item -Force -ItemType Directory -Path `&quot;`$HOME\\.ssh`&quot;; Add-Content -Force -Path `&quot;`$HOME\\.ssh\\authorized_keys`&quot; `&quot;&quot; 3.本地系统（macOS or Linux）=&gt;服务器系统（macOS or Linux）123export USER_AT_HOST=&quot;服务器账户名@服务器IP&quot; // 使用你自己的服务器IP与登录账户export PUBKEYPATH=&quot;$HOME/.ssh/id_rsa.pub&quot; // PUBKEYPATH是你公钥的路径ssh-copy-id -i &quot;$PUBKEYPATH&quot; &quot;$USER_AT_HOST&quot; 4.本地系统（macOS or Linux）=&gt;服务器系统（Windows）123export USER_AT_HOST=&quot;服务器账户名@服务器IP&quot; // 使用你自己的服务器IP与登录账户export PUBKEYPATH=&quot;$HOME/.ssh/id_rsa.pub&quot; // PUBKEYPATH是你公钥的路径ssh $USER_AT_HOST &quot;powershell New-Item -Force -ItemType Directory -Path \\&quot;\\$HOME\\\\.ssh\\&quot;; Add-Content -Force -Path \\&quot;\\$HOME\\\\.ssh\\\\authorized_keys\\&quot; -Value '$(tr -d '\\n\\r' &lt; &quot;$PUBKEYPATH&quot;)'&quot; 配置成功之后，就可以不输入密码自动连接了。 多密钥连接多服务器方法你可以单使用一对秘钥，将同一个公钥配置到你所有的服务器，然后一个秘钥就可以自动登录所有的服务器。如果你想为服务器配置单一不同的公钥，则你需要生成多对秘钥： 1234// 执行生成不同的秘钥ssh-keygen -t rsa -b 4096 -f ~/.ssh/id_rsa-remote-ssh // macOS / Linux系统ssh-keygen -t rsa -b 4096 -f &quot;$HOME\\.ssh\\id_rsa-remote-ssh&quot; // Windows系统//-f 参数用来配置秘钥生成的路径及名称 生成后重复上述将公钥上传的操作，然后在你的配置文件 (.ssh/config) 中为你的服务器配置IdentityFile属性，如下： 1234Host 服务器名称 User 登录账户 HostName 服务器IP IdentityFile 私钥路径 通过上述设置中的 IdentityFile 所被赋予的值，就可以区分不同的私钥。","link":"/2021/03/06/Visual%20Sttudio%20Code-Remote-SSH%E9%85%8D%E7%BD%AE%E6%96%B9%E6%B3%95/"}],"tags":[],"categories":[]}